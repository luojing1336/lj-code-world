# 设计模式学习

## 设计模式定义

**设计模式(Design Pattern)**，是一套被反复使用的、多数人知晓的、经过分类变目的、代码设计经验的总结，使用设计模式是为了可重用代码、让代码更容易被他人理解并且保证代码可靠性。

**设计模式(Design Pattern)**，一般包含模式名称、问题、目的、解决方案、效果等组成要素。**模式名称(Pattern Name)**通过一两个词来为模式命名，以便我们更好地理解模式并方便开发人员之间的交流，绝大多数模式都是根据其功能或者模式结构来命名的；**问题(Problem)**描述了应该在何时使用模式，它包含了设计中存在的问题以及问题存在的原因；**解决方案(Solution)**描述了一个设计模式的组成部分，以及这些组成部分之间的相互关系、各自的职责和写作方式，通常解决方案通过UML类图和核心代码进行描述；**效果(Consequence)**描述了模式的优缺点以及在使用模式时应权衡的问题。

## UML类图

1. UML概述，UML，Unified Modeling Language，名称中所包含的三个单词正式UML特性的体现，Unified，通过统一的表示方法，让不同知识背景的领域专家、系统分析设计人员和开发人员以及用户可以方便地交流；Modeling，通过一些标准的图形符号和文字来对系统进行建模，用于对软件进行描述、可视化处理、构造和建立软件系统制品的文档；Language，通过一种分析设计语言，即建模语言，用来表达自己的规则。
2. UML结构，UML是一种由图形符号表达的建模语言，其结构主要包括以下几个部分：
   * **视图(View)**：UML视图用于从不同的角度来表示待建模系统，视图是由许多图形组成的一个抽象集合，在建立一个系统模型时，只有通过定义多个视图，每个视图显示该系统的一个特定方面，才能构造出该系统的完整蓝图，视图也将建模语言链接到开发所选择的方法和过程。UML视图包括用户视图、结构视图、行为视图、实现视图和环境视图。其中，用户视图以用户的观点表示系统的目标，它是所有视图的核心，用于描述系统的需求；结构视图表示系统的静态行为，描述系统的静态元素如包、类与对象，以及它们之间的关系；行为视图表示系统的动态行为，描述系统的组成元素(如对象)在系统运行时的交互关系；实现视图表示系统中逻辑元素的分布，描述系统中物理文件以及它们之间的关系；环境视图表示系统中物理元素的分布，描述系统中硬件设备以及它们之间的关系。
   * **图(Diagram)**：UML图是描述UML视图内容的图形，包括例图(Use Case Diagram)、类图(Class Diagram)、对象图(Object Diagram)、包图(Package Diagram)、组合结构图(Composite Structure Diagram)、状态图(State Diagram)、话动图(Activity Diagram)、顺序图(Sequence Diagram)、通信图(Communication Diagram)、定时图(Timing Diagram)、交互概览图(Interaction Overview Diagram)、组件图(Component Diagram)和部署图(Deployment Diagram),通过它们之间的相互组合可提供待建模系统的所有视图。其中，用例图对应用户视图，类图、对象图、包图和组合结构图对应结构视图，状态图、活动图、顺序图、通信图、定时图和交互概览图对应行为视图，组件图对应实现视图，部署图对应环境视图。
   * **模型元素(Model Element)**：模型元素是指UML图中所使用的一些概念，它们对应于普通的面向对象概念，如类、对象、消息以及这些概念之间的关系，如关联关系、依赖关系、泛化关系等。同一个模型元素可以在多个不同的UML图中使用，但是，无论在哪个图中，同一个模型元素都必须保持相同的意义并具有相同符号。
   * **通用机制(General Mechanism)**：UML提供的通用机制位模型元素提供额外的注释、信息和语义，这些通用机制也提供了扩展机制，允许用户对UML进行扩展，如定义新的建模元素、扩展原有元素的语义、添加新的特殊信息来扩展模型元素的规则说明等，以便适用于一个特定的方法或过程、组织或用户。

## 面向对象设计原则

面向对象设计的目标之一在于支持可维护性复用，一方面需要实现设计方案或者源代码的重用，另一方面要确保系统能够易于扩展和修改，具有较好的灵活性。

1. 单一职责原则(Single Responsibility Principle,SRP)，一个类只负责一个功能领域中的相应职责；
2. 开闭原则(Open-Closed Principle,OCP)，软件实体应对扩展开放，而对修改关闭；
3. 里氏代换原则(Liskov Substitution Principle,LSP)，所有引用基类对象的地方能够透明地使用其子类的对象；
4. 依赖倒转原则(Dependence Inversion Principle,DIP)，抽象不应该依赖于细节，细节应该依赖于抽象；
5. 接口隔离原则(Interface Segregation Principle,ISP)，使用多个专门的接口，而不使用单一的总接口；
6. 合成复用原则(Composite Reuse Principle,CRP)，尽量使用对象组合，而不是继承来达到复用的目的；
7. 迪米特法则(Law of Demeter,LoD)，一个软件实体应当尽可能少地与其他实体发生相互作用。

## 设计模式分类

常用设计模式一览表

|                 类型                 |                     模式名称                      | 学习难度 | 使用频率 |
| :----------------------------------: | :-----------------------------------------------: | :------: | :------: |
| 创建型模式<br />(Creational Pattern) |         单例模式<br />(Singleton Pattern)         |    1     |    4     |
|                                      |    简单工厂模式<br />(Simple Factory Pattern)     |    2     |    3     |
|                                      |    工厂方法模式<br />(Factory Method Pattern)     |    2     |    5     |
|                                      |   抽象工厂模式<br />(Abstract Factory Pattern)    |    4     |    5     |
|                                      |         原型模式<br />(Prototype Pattern)         |    3     |    3     |
|                                      |         建造者模式<br />(Builder Pattern)         |    4     |    2     |
| 结构型模式<br />(Structural Pattern) |         适配器模式<br />(Adapter Pattern)         |    2     |    4     |
|                                      |          桥接模式<br />(Bridge Pattern)           |    3     |    3     |
|                                      |         组合模式<br />(Composite Pattern)         |    3     |    4     |
|                                      |         装饰模式<br />(Decorator Pattern)         |    3     |    3     |
|                                      |          外观模式<br />(Facade Pattern)           |    1     |    5     |
|                                      |         享元模式<br />(Flyweight Pattern)         |    4     |    1     |
|                                      |           代理模式<br />(Proxy Pattern)           |    3     |    4     |
| 行为型模式<br />(Behavioral Pattern) | 职责链模式<br />(Chain of Responsibility Pattern) |    3     |    2     |
|                                      |          命令模式<br />(Command Pattern)          |    3     |    4     |
|                                      |       解释器模式<br />(Interpreter Pattern)       |    5     |    1     |
|                                      |        中介者模式<br />(Mediator Pattern)         |    3     |    2     |
|                                      |         备忘录模式<br />(Memento Pattern)         |    2     |    2     |
|                                      |        观察者模式<br />(Observer Pattern)         |    3     |    5     |
|                                      |           状态模式<br />(State Pattern)           |    3     |    3     |
|                                      |         策略模式<br />(Strategy Pattern)          |    1     |    4     |
|                                      |    模板方法模式<br />(Template Method Pattern)    |    2     |    3     |
|                                      |         访问者模式<br />(Visitor Pattern)         |    4     |    1     |



